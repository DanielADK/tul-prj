@startuml
node "Externí server" {
  database "MySQL Databáze" as MySQL
  cloud "PHP Server" as PHP {
    [Backend]
    [Frontend]
    [API]
    [Exporter]
  }
}
node "Školní část" {
  cloud "LDAP Server" as LDAP
  cloud "Moodle Server" as Moodle
  cloud "Žákovská VPS" as VPS
  cloud "Telefonní systém" as Telefony
  cloud "Z-Ware server" as ZWare
  cloud "Čipový server" as Cipy
}
cloud "Matriční úřad" as Matrika
cloud "Evidenční software" as Evidence
cloud "Účetní software" as Ucto
MySQL <--> [Backend] : Obousměrná výměna dat
[Backend] <--> [API]
[Backend] -right-> [Exporter]
[Backend] <-- Cipy : Dotazování čipového serveru
[Frontend] <--> [Backend]
[LDAP] --> Moodle : Událostmi řízená synchronizace
[API] --> Telefony
[API] --> LDAP : Periodicky vykonávané synchronizační skripty 
[API] --> ZWare
LDAP --> [Školní část] : Školní počítače & MS služby
[Exporter] -right-> Matrika
[Exporter] -right-> Evidence
[Exporter] -right-> Ucto
@enduml