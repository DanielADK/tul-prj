@startuml
node "Externí server" {
  database "MySQL Databáze" as MySQL
  node "PHP Server" as PHP {
    [Backend]
    [Frontend]
    [API]
    [Exporter]
  }
}
node "Školní část" {
  node "LDAP Server" as LDAP
  node "Moodle Server" as Moodle
  cloud "Telefonní systém" as Telefony
  node "Z-Ware server" as ZWare
  node "Čipový server" as Cipy
  entity "Školní počítače & MS služby" as ŠkolníPC
  cloud "Žákovská VPS" as VPS
}
cloud "Matriční úřad" as Matrika
cloud "Evidenční software" as Evidence
cloud "Účetní software" as Ucto
MySQL <--> [Backend] : Obousměrná výměna dat
[Backend] <-right-> [API]
[Backend] -> [Exporter]
[Backend] <- Cipy : Dotazování čipového serveru
[Frontend] <--> [Backend]
[LDAP] --> Moodle : Událostmi řízená synchronizace
[API] --> Telefony
[API] -down-> LDAP : Periodicky vykonávané synchronizační skripty 
[API] --> ZWare
LDAP --> [ŠkolníPC]
[Exporter] -right-> Matrika
[Exporter] -right-> Evidence
[Exporter] -right-> Ucto
@enduml